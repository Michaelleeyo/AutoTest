根据日常工作和官方文档总结https://www.jenkins.io/zh/doc/

pipeline { 
    agent any 
    stages {
        stage('Build') { 
            steps { 
                sh 'make' 
            }
        }
        stage('Test'){
            steps {
                sh 'make check'
                junit 'reports/**/*.xml' 
            }
        }
        stage('Deploy') {
            steps {
                sh 'make publish'
            }
        }
    }
}
各种脚本都可以返回 ``returnStatus`` 或 ``returnStdout``
result = sh(script: "docker build -t registry.sudytech.com:35000/coreplusbase-b/base:${version} .", returnStatus: true)
                        if(result == 0){
                            println("Base镜像构建完毕！")
                        }else{
                            error("Base镜像构建失败，请检查日志！")
                        }
pipeline配置agent,parameters、tools、environment、stages(stage、steps)、post
expression：当指定的Groovy表达式求值为true时执行阶段
When{
  expression{
      return {isWebpack == "true"}
  }
}
定义一个getSever方法连接服务器、初始化环境、拉取源码、按照Jest插件、控件单元测试和打包、编译base完整包、单元测试环境初始化、交付标准全量包、交付docker版镜像、测试环节Junit、jmeter、selenium、POST
连接服务器，getServer("serverip"+"Username with password自动生成的凭据ID")
拉取代码，git branch:"${params.branchName}",credentialsId:"SSH Username with private key 设置的账号ID",url:'仓库地址'
主要插件及工具：Git Parameter、Pipeline、Blue Ocean ; Maven、JDK、NodeJS、Publish Html Report、SSH Pipeline Steps
returnStatus：布尔类型，默认脚本返回的是状态码，如果是一个非零的状态码，则会引发pipeline执行失败。如果returnStatus参数为true，则不论状态码是什么，pipeline的执行都不会受影响。
returnStdout：布尔类型，如果为true，则任务的标准输出将作为步骤的返回值，而不是打印到构建日志中（如果有错误，则依然会打印到日志中）
除了script参数，其他参数都是可选的。returnStatus和returnStdout参数一般不同时使用，因为返回值只能有一个；如果同时使用，则只有returnStatus参数生效。
Cron语法使用五个星号表示，每个星号之间用空格隔开。语法如下– [分钟] [小时] [每月的某天] [月份] [一周的某天]。例如，如果您想为每个星期一的11.59 pm设置cron，则为59 11 * * 1



Post
always：不管当前完成状态是什么，都执行
changed：只要当前完成状态和上一次完成状态不同就执行
fixed：上一次完成状态为失败或者不稳定（unstable），当前完成状态为成功时执行
regression：上一次完成状态为成功，当前完成状态为失败、不稳定或中止时执行
aborted：当前执行结果状态是中止状态时执行
failure：当前完成状态为失败时执行
success：当前完成状态为成功时执行
unstable：当前完成状态为不稳定时执行
cleanup：清理条件块。不论当前完成状态是什么，在其他所有条件块执行完成后都执行。
